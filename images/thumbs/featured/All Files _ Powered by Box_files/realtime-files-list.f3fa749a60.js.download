(window.webpackJsonp=window.webpackJsonp||[]).push([["realtime-files-list"],{BfDu2MDO2t:function(e,t,r){"use strict";var n=r("jyz5Lsk3MC"),o=r("zQH58AlkDG"),i=r("zGF2dVa2T4"),a=r("aWKKml4MOj"),s=r("DtTz+aCpQR"),u=Object(a.a)(s.a),l=r("fQsIn8m0Jq"),f=r("oB2klZje1l"),c=r("Z98B9oobdA"),p=function(){r.e("item-realtime").then(r.bind(null,"H4C5s/Lxrp")).then((function(e){var t=e.reducer,r=e.ItemRealtimeNotification;l.a.register({itemRealtime:t}),f.d.register(c.a,r)}))};function d(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,s,"next",e)}function s(e){d(i,n,o,a,s,"throw",e)}a(void 0)}))}}var h;function v(e){var t=function(e){var t={};return e.forEach((function(e){var r=e.type.toLowerCase();t[r]||(t[r]=[]),t[r].push(e)})),t}(e);Object.keys(t).forEach((function(e){i.a.dispatch(u({type:e,events:t[e]}))}))}function y(e){return b.apply(this,arguments)}function b(){return(b=m(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.position,e.next=3,Object(n.c)("/app-api/enduserapp/realtime/latest-events",{position:r});case 3:if(!((o=e.sent)&&o.position&&o.events)){e.next=7;break}return o.events.length>0&&v(o.events),e.abrupt("return",{newPosition:o.position});case 7:throw new Error("No events found.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){var e=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:h||(h=new o.a("/app-api/enduserapp/realtime/subscription",y,!1,!1)).subscribe();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.a=function(){setTimeout(w,4e3)}},"DtTz+aCpQR":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="itemRealtime/SET_LATEST_EVENTS"},Z98B9oobdA:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="ItemRealtimeNotification"},kQ1mWTX7wW:function(e,t,r){"use strict";r.r(t);var n=r("q9wI8Vu9Ou"),o=r("7p/EjBZ4S1"),i=r("oB2klZje1l"),a=r("SZsTaEqSnd"),s=r("kT76pzrGh+"),u=r("xcgCR9QaiN"),l=r("q1tIBJhxTW"),f=(r("JPcvh7FMFD"),r("3+kv4Avc8F"),r("BfDu2MDO2t")),c=r("LwZZ+jkMTU"),p=r("tGiIrIA8S4"),d=r("zfug/tAS+n"),m=r("JRPeW/Ew/U"),h=Object(m.defineMessages)({anonymousUploadedNewFileRefresh:{id:"enduser.realtime.anonymousUploadedNewFileRefresh",defaultMessage:'Someone uploaded "{fileName}". Would you like to refresh the page?'},youUploadedNewFileRefresh:{id:"enduser.realtime.youUploadedNewFileRefresh",defaultMessage:'"{fileName}" was just uploaded. Would you like to refresh the page?'},boxUserUploadedNewFileRefresh:{id:"enduser.realtime.boxUserUploadedNewFileRefresh",defaultMessage:'{userName} uploaded "{fileName}". Would you like to refresh the page?'},anonymousUploadedNewFileVersionRefresh:{id:"enduser.realtime.anonymousUploadedNewFileVersionRefresh",defaultMessage:'Someone uploaded a new version of "{fileName}". Would you like to refresh the page?'},youUploadedNewFileVersionRefresh:{id:"enduser.realtime.youUploadedNewFileVersionRefresh",defaultMessage:'A new version of "{fileName}" was just uploaded. Would you like to refresh the page?'},boxUserUploadedNewFileVersionRefresh:{id:"enduser.realtime.boxUserUploadedNewFileVersionRefresh",defaultMessage:'{userName} uploaded a new version of "{fileName}". Would you like to refresh the page?'}});function v(e){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?g(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=p.b.formatMessage,O=function(e){function t(){var e,r;y(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return U(g(r=w(this,(e=N(t)).call.apply(e,[this].concat(o)))),"processedFileVersionIDs",{}),U(g(r),"getUploadRealtimeNotificationMessage",(function(e){var t,n,o=r.props.currentUser.id,i=e.fileCreatedAt,a=e.fileModifiedAt,s=e.fileName,u=e.userID,l=e.userName,f=2===parseInt(u,10),c=parseInt(u,10)===parseInt(o,10);return a===i?f?(t=h.anonymousUploadedNewFileRefresh,n={fileName:s}):c?(t=h.youUploadedNewFileRefresh,n={fileName:s}):(t=h.boxUserUploadedNewFileRefresh,n={fileName:s,userName:l}):f?(t=h.anonymousUploadedNewFileVersionRefresh,n={fileName:s}):c?(t=h.youUploadedNewFileVersionRefresh,n={fileName:s}):(t=h.boxUserUploadedNewFileVersionRefresh,n={fileName:s,userName:l}),F(t,n)})),U(g(r),"handleUploadRealtimeEvents",(function(e){var t=!1,n=r.props,o=n.showFilesListRealtimeNotification,i=n.folderID,a=n.currentUser,s=a.id,u=a.realtimeSubscriberID,l=n.currentNotifications;e.forEach((function(e){var n=e.fileVersionID,a=e.folderID,f=e.fileID,p=e.subscriberID,m=e.userID,h=e.fileCreatedAt,v=e.fileModifiedAt;if(!t){var y=r.processedFileVersionIDs[n],b=u===p,w=i===a,N=v===h,g=parseInt(m,10)===parseInt(s,10);if(!y&&!b&&w){r.processedFileVersionIDs[n]=!0,t=!0;for(var R,U=r.getUploadRealtimeNotificationMessage(e),F=l.filter((function(e){return e.customKey===c.m})).keys(),O=F.next();!O.done&&!R;){var j=l.get(O.value).toJS().props.items.toJS();1===j.length&&(R=j[0].fileID),O=F.next()}U&&!(R===f&&g)&&(d.b.recordAction({feature:"realtime",component:"notification",target:"shown",action:"programmatic",data:{folderID:a,wasEventTriggeredByCurrentUser:g,wasFileUploadedBrandNew:N}}),o(U))}}}))})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){Object(f.a)()}},{key:"componentDidUpdate",value:function(e){var t=e.uploadRealtimeEvents,r=this.props,n=r.isPreviewOpen,o=r.uploadRealtimeEvents;n||o.isEmpty()||t.equals(o)||this.handleUploadRealtimeEvents(o)}},{key:"render",value:function(){return null}}])&&b(r.prototype,n),o&&b(r,o),t}(l.Component),j=r("Z98B9oobdA"),k=Object(o.a)(n.r,Object(o.b)((function(e){return{isPreviewOpen:Object(s.e)(e),uploadRealtimeEvents:Object(a.a)(e,"upload"),currentNotifications:Object(u.a)(e)}}),(function(e){return{showFilesListRealtimeNotification:function(t){return e(Object(i.g)(t,void 0,j.a,void 0,!0))}}})))(O);r.d(t,"FilesListRealtimeNotification",(function(){return k}))}}]);